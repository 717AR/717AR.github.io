<!DOCTYPE html>
<html>
<body>
<h2>Airport Reserve Pay/ Credit Calculator - v16</h2>
    <p> Notes: Only works for 1000-1800 AR. Doesn't work for off duty times after midnight.</p>
     
Enter your Block in time:<input id="time" type="time"><br>
<button id="calc">Calculate</button><br>

Off Duty: <div id="offduty"></div><br>
Duty Day:<div id="duty"></div><br>
60% Duty Rig:<div id="rig"></div><br>
M4M (DEXT):<div id="m4m"></div><br>
Total Pay and Credit:<div id="pay" style='font-weight:bold'>5:00</div><br>
    
<script>

 var calc = document.getElementById("calc")

calc.addEventListener("click", function() {
    
    //get user input in-time, convert to js date
    var time = document.getElementById("time").value;
    var in_time = new Date("2023-01-01" +" "+ time);
      
    //add 15 min to in-time to get off duty time
    var plus15 = new Date(in_time.getTime() + 15*60000); //js uses milliseconds so 15*60000 = 15 min
    
    function padTo2Digits(num) {return num.toString().padStart(2, '0');}
   
    //grab hours and minutes from off duty time to do some math
    var hour = plus15.getHours();
    var min = plus15.getMinutes();
    
    //compute duty day from 1000 in minutes
    var duty = (hour * 60 + min) - 600   
    let h = Math.floor(duty / 60); 
    let m = duty % 60;
    document.getElementById("duty").innerHTML = `${padTo2Digits(h)}:${padTo2Digits(m)}`;
    //var duty_day = `${padTo2Digits(h)}:${padTo2Digits(m)}`; //converts minutes back to HH:MM
    
    //compute duty rig
    var rig = duty * .6; //60% duty rig
    const h2= Math.floor(rig / 60); 
    const m2 = Math.round(rig % 60);
    document.getElementById("rig").innerHTML = `${padTo2Digits(h2)}:${padTo2Digits(m2)}`;
    
    //compute m4m past 1800
    var m4m = duty - 480;
    let h3 = Math.floor(m4m / 60); 
    let m3 = Math.round(m4m % 60);
    document.getElementById("m4m").innerHTML = `${padTo2Digits(h3)}:${padTo2Digits(m3)}`;
    //var m4m_pay = `${padTo2Digits(h3)}:${padTo2Digits(m3)}`;
    
    //add rig plus m4m
    var pay = m4m + rig;
    let h4= Math.floor(pay / 60); 
    let m4 = Math.round(pay % 60);
         if (pay < 5) {
            document.getElementById("pay").innerHTML = "5:00";
    }  else {
    document.getElementById("pay").innerHTML = `${padTo2Digits(h4)}:${padTo2Digits(m4)}`;
    }
    //var tot_pay = `${padTo2Digits(h4)}:${padTo2Digits(m4)}`;
 
    
   /*
   */
 
})
</script>

    
</body> 
</html>
