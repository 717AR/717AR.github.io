<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FAR Part 117 FDP Calculator</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; max-width: 800px; }
    label { margin-top: 12px; display: block; font-weight: bold; }
    input, select { padding: 6px; margin: 6px 0; width: 100%; max-width: 320px; }
    button { margin-top: 15px; padding: 10px 20px; background-color: #2e7d32; color: white; border: none; cursor: pointer; font-size: 1rem; }
    button:hover { background-color: #1b5e20; }
    .result { margin-top: 25px; padding: 15px; border: 1px solid #ccc; background: #f9f9f9; }
    .warning { color: #b71c1c; font-weight: bold; }
    .note { font-size: 0.9rem; color: #555; }
  </style>
</head>
<body>

<h1>FAR Part 117 Flight Duty Period (FDP) Calculator</h1>
<p class="note">This calculator uses <strong>Table B</strong> of 14 CFR Part 117 for maximum FDP. For planning purposes only.</p>

<form id="fdpForm">
  <label for="reportTime">Report Time (HH:mm)</label>
  <input type="time" id="reportTime" required>

  <label for="segments">Number of Flight Segments</label>
  <select id="segments">
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5</option>
    <option value="6">6</option>
    <option value="7">7</option>
  </select>

  <label for="pilots">Number of Pilots</label>
  <select id="pilots">
    <option value="2">2 (Unaugmented)</option>
    <option value="3">3 (Augmented)</option>
    <option value="4">4 (Augmented)</option>
  </select>

  <label for="restFacility">Crew Rest Facility (Augmented Only)</label>
  <select id="restFacility">
    <option value="1">Class 1</option>
    <option value="2">Class 2</option>
    <option value="3">Class 3</option>
  </select>

  <button type="submit">Calculate FDP</button>
</form>

<div class="result" id="result"></div>

<script>
  // Table B FDP values (14 CFR Part 117)
  const tableB_unaugmented = [
    { window: '0000-0359', values: [9, 9, 9, 9, 9, 9, 9] },
    { window: '0400-0459', values: [10, 10, 10, 10, 9, 9, 9] },
    { window: '0500-0559', values: [12, 12, 12, 12, 11.5, 11, 10.5] },
    { window: '0600-0659', values: [13, 13, 12, 12, 11.5, 11, 10.5] },
    { window: '0700-1159', values: [14, 14, 13, 13, 12.5, 12, 11.5] },
    { window: '1200-1259', values: [13, 13, 13, 13, 12.5, 12, 11.5] },
    { window: '1300-1659', values: [12, 12, 12, 12, 11.5, 11, 10.5] },
    { window: '1700-2159', values: [12, 12, 11, 11, 10, 9, 9] },
    { window: '
